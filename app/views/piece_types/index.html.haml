%section.piece_types
  .title
    Piece Types
    - if signed_in? && current_user.can_create?(PieceType)
      = link_to 'New', [:new, :piece_type]

  .description
    The names and images of all the different types of pieces available.
    %br
    Variants must have a King
    = surround '(see ', '),' do
      = link_to 'invariants', :invariants
    but are otherwise free to include or exclude any other piece type.

  %table
    %thead
      %tr
        %th Name
        %th Alabaster Image
        %th Onyx Image

    %tbody
      - @piece_types.each do |piece_type|
        %tr
          %td= piece_type.name
          %td= image_tag piece_type.alabaster_image
          %td= image_tag piece_type.onyx_image

          - if signed_in? && current_user.can_manage?(piece_type)
            %td
              = link_to 'Edit', [:edit, piece_type]
              = link_to 'Destroy', piece_type, method: :delete, data: { confirm: 'Are you sure?' }
